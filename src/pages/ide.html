<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MatrioshTS</title>
    <link href="../styles/styleIde.css" rel="stylesheet"/>
    <script src="../scripts/front/ide.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="../scripts/exceptions/creatorException.js"></script>
    <script src="../scripts/parsers/analyzer.js"></script>
    <script src="../scripts/structure/Nodo.js"></script>
    <script src="../scripts/structure/Constantes.js"></script>
    <script src="../scripts/structure/SimboloAncestor.js"></script>
    <script src="../scripts/structure/ListaErrores.js"></script>
    <script src="../scripts/structure/Variable.js"></script>
    <script src="../scripts/structure/TablaHash.js"></script>
    <script src="../scripts/structure/ListaSimbolos.js"></script>
    <script src="../scripts/logic/BackEnd.js"></script>
    <script src="../scripts/utils/GraphicUtil.js"></script>
    <script src="../scripts/structure/ListaFunciones.js"></script>
    <script src="../scripts/structure/Funcion.js"></script>
    <script src="../scripts/structure/Arreglo.js"></script>
    <script src="../scripts/structure/Nulo.js"></script>
    <script src="../scripts/logic/Sentencia.js"></script>
    <script src="../scripts/structure/TablaSimbolos.js"></script>
    <script src="../scripts/structure/Type.js"></script>
    <script src="../scripts/logic/Declaracion.js"></script>
    <!-- VARIABLES GLOBALES -->
    <script type="text/javascript">
    </script>
</head>
<body background="../images/fondo-azul.jpg">
<div id="divEntrada" align="center">
<textarea id="txtEntrada" cols="175" rows="28" style="background-color:#CCC;font-style:italic">
    let mivar:string;




</textarea>
</div>
<div id="divBotones" align="center" >
    <button id="btnTraducir" class="button">Traducir código</button>
    <button id="btnGenerar" class="button">Ejecutar código</button>
    <button id="btnGraficar"class="button">Graficar Ast</button>
    <button id="btnTablaSimbolos" class="button">Ver Tabla Simbolos</button>
    <button id="btnTablaErrores" class="button">Ver Tabla Errores</button>
    <button id="btnLimpiarConsola" class="button">Limpiar Consola</button>
</div>
<div id="consola" align="center">
<textarea id="txtConsola" disabled="disabled" cols="175" rows="10" style="background-color:#000000;font-style:inherit;color: chartreuse">
</textarea>
</div>
    <script type="text/javascript">
        /**
         * Metodos del Front
         */
        $(document).ready(function(){

            //PASAMOS EL OBJETO DE CONSOLA
            _txtConsola = $("#txtConsola");
            $("#txtConsola").val(CONSOLE_LINE_MARK);

            /**
             * Ejecutar código
             */
            $("#btnGenerar").click(function(){
                entrada = $("#txtEntrada").val();
                ejecutar(entrada);
            });

            /**
             * Graficar AST
             */
            $("#btnGraficar").click(function(){
                let cadAst=getStringAst();
                let pagina = "https://dreampuf.github.io/GraphvizOnline/#"+cadAst;
                let url=encodeURI(pagina);
                window.open(url);
            });

            /**
             * Ver Tabla de Simbolos
             */
            $("#btnTablaSimbolos").click(function(){
                print("Renderizando tabla de Simbolos.  "+new Date());
                if(_backEnd==undefined){
                    print("No hay tabla de simbolos que mostrar. ");
                    return;
                }
                let w = window.open("tmpTablaSimbolos", "#");
                let d = w.document.open();
                let strTabla = _backEnd.ts.getStrTablaSimbolos();
                d.write("<!DOCTYPE html><html><header><title>MatrioshTS</title></header><body>"+strTabla+"</body></html>");
                d.close();
                print("OK");
            });

            /**
             * Ver Tabla Errores
             */
            $("#btnTablaErrores").click(function(){
                print("Renderizando tabla de errores.  "+new Date());
                if(_backEnd==undefined){
                    print("No hay tabla de errores que mostrar. ");
                    return;
                }
                let w = window.open("tmpTablaErrores", "#");
                let d = w.document.open();
                let strTabla = _backEnd.listaErrores.getStrTable();
                d.write("<!DOCTYPE html><html><header><title>MatrioshTS</title></header><body>"+strTabla+"</body></html>");
                d.close();
                print("OK");
            });


            /**
             * Limpiar Consola
             */
            $("#btnLimpiarConsola").click(function(){
                $("#txtConsola").val(CONSOLE_LINE_MARK);
            });



        });
    </script>
</body>
</html>